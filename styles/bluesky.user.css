/* ==UserStyle==
@name           Bluesky
@namespace      https://aldaviva.com/userstyles/
@version        0.4.1
@description    Make avatar masks into rounded rectangles with small radii, instead of circles. In dark mode, make background solid black for OLEDs.
@author         Ben Hutchison <ben@aldaviva.com> (https://aldaviva.com)
@license        MIT
@homepageURL    https://github.com/Aldaviva/userstyles
@supportURL     https://github.com/Aldaviva/userstyles/issues
@preprocessor	less
==/UserStyle== */

@-moz-document domain("bsky.app") {
    /* Avatar border radius */
    [data-testid="userAvatarImage"] {
        border-radius: 2px !important;
    }
    [data-testid="profileHeaderAviButton"] {
        border-radius: 4px !important;
    }

    /* Black background */
    .blackBackground() {
        body {
            background-color: black;
        }

        #root > div > div > div > div,
        *[style *= "background-color: rgb(8, 10, 12);"],
        div[style *= "background-color: rgb(1, 1, 1);"] {
            background-color: transparent !important;
        }
    }

    @media (prefers-color-scheme: dark){
        html.colorMode--system {
            /* Ignore the Stylus error, it can't parse LESS mixin invocations, but they do get compiled and rendered correctly in the web page. */
            .blackBackground();
        }
    }

    html.colorMode--dark {
        .blackBackground();
    }
}
