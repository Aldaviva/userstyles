/* ==UserStyle==
@name           Twitter
@namespace      https://aldaviva.com/userstyles/
@version        1.0.33
@description    Removed clutter, ads, and unwanted tweets. Render avatars in rounded rectangles instead of circles.
                You can block keywords with https://github.com/Aldaviva/content-blocking-filters
                You may also want to keep the timeline in Latest Tweets mode: https://github.com/Aldaviva/userscripts/raw/master/twitter.user.js
@author         Ben Hutchison <ben@aldaviva.com> (https://aldaviva.com)
@license        MIT
@homepageURL    https://github.com/Aldaviva/userstyles
@supportURL     https://github.com/Aldaviva/userstyles/issues
==/UserStyle== */

@-moz-document domain("twitter.com") {
    /* Hide What's Happening/Trends right panel */
    div[data-testid="sidebarColumn"] > div > div > div > div > div > div:nth-child(3),
    /* Hide Who To Follow right panel */
    div[data-testid="sidebarColumn"] > div > div > div > div > div > div:nth-child(4),
    /* Hide Topics to Follow right panel */
    div[data-testid="sidebarColumn"] > div > div > div > div > div > div:nth-child(5),
    /* Hide Explore left navigation link */
    nav a[data-testid="AppTabBar_Explore_Link"],
    /* Hide Twitter Blue left navigation link */
    nav a[aria-label="Twitter Blue"],
    /* Hide Verified Organizations Signup left navigation link */
    nav a[aria-label="Verified Organizations"],
    /* Hide Verified left navigation link */
    nav a[aria-label="Verified"],
    /* Hide Communities left navigation link */
    nav a[aria-label="Communities"],
    /* Hide Notifications left navigation link */
    /*nav a[data-testid="AppTabBar_Notifications_Link"],*/
    /* Hide the Direct Messages floating pane from the bottom-right corner of the page */
    div[data-testid="DMDrawer"],
    /* Hide footer links and copyright */
    nav[aria-label="Footer"],
    /* Hide Compose a Direct Message button in the bottom-right corner of the page */
    aside[aria-label="Compose a Direct Message"]
    /* Hide See What's Happening timeline boxes, like Tokyo 2020 Olympics. Disabled because this also hides inline videos */
    /*div[data-testid="placementTracking"]*/ {
        display: none;
    }
    
    /* Square avatars. Applies to:
     *  - Timeline avatars
     *  - What's Happening self avatar
     *  - Bottom-left account menu avatar
     *  - Profile page big avatar
     *  - Compose Tweet modal dialog self avatar
     *  - Show This Thread
    */
    div[style *= 'background-image: url("https://pbs.twimg.com/profile_images/'] {
        border-radius: 2px;
    }
    div[style *= 'height: calc(100% - '] {
        border-radius: 0;
    }
    
    /* Hide the Replies, Retweets, Likes, and Share buttons underneath each tweet on the home timeline */
    div[aria-label='Timeline: Your Home Timeline'] [data-testid="tweet"] div[role="group"],
    /* Hide the More dropdown from the top-right corner of each tweet on the home timeline */
    div[aria-label='Timeline: Your Home Timeline'] [data-testid="tweet"] div[aria-label="More"] {
        display: none;
    }
    /* Once the above buttons are hidden from each tweet, the tweet box may be too short and the avatar may be too close to the bottom border, so give the box a minimum height to ensure the avatar bottom padding is at least as large as its top padding. This assumes that your Twitter display settings have your font size set to 2 out of 5. */
    [data-testid="tweet"] {
        min-height: 72px;
    }
    
    /* Hide the Top Tweets button, but don't mess with the layout so it can still be clicked with https://github.com/Aldaviva/userscripts/blob/master/twitter.user.js */
    div[aria-label ^= "Top Tweets"] {
        visibility: hidden;
    }
    
    /* Don't crop images */
    [data-testid="tweet"] a[href *= "/photo/"] div[style="padding-bottom: 50%;"] {
        padding-bottom: 0 !important;
    }
    [data-testid="tweet"] a[href *= "/photo/"] div[style="padding-bottom: 50%;"] + div,
    [data-testid="tweet"] a[href *= "/photo/"] div[style="padding-bottom: 50%;"] + div > div {
        position: static;
    }
    [data-testid="tweet"] a[href *= "/photo/"] div[style="padding-bottom: 50%;"] + div > div img {
        height: auto;
        opacity: 1;
        position: static;
    }
    
    /* Revert tweet composer textboxes' placeholder text */
    .public-DraftEditorPlaceholder-inner {
        visibility: hidden;
    }
    .public-DraftEditorPlaceholder-inner::before {
        content: "Whatâ€™s happening?";
        visibility: visible;
    }
    div[aria-label="Timeline: Conversation"] .public-DraftEditorPlaceholder-inner::before {
        content: "Tweet your reply";
    }
    div[data-testid="twc-cc-mask"] + div > div + div .public-DraftEditorPlaceholder-inner::before {
        content: "Add another Tweet";
    }
}
